import{S as L,N as v,P as C,i as B,a as O,K as A}from"./assets/vendor-BCNVujLQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".events-swiper");e&&new L(e,{modules:[v,C],slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},pagination:{el:".ev-pagination",clickable:!0,renderBullet:(t,o)=>`<li class="${o}" aria-label="Go to slide ${t+1}"></li>`,bulletClass:"ev-dot",bulletActiveClass:"ev-dot--active"},navigation:{nextEl:".events-swiper-btn-next",prevEl:".events-swiper-btn-prev"},watchOverflow:!0})});const m="https://books-backend.p.goit.global",P="/books/category-list",x="/books/top-books",D="/books/category",I="/books/",_=10,q=24,s={categoryToggleBtn:document.querySelector("[data-category-list-toggle]"),categoryMenuContainer:document.querySelector("[data-category-list]"),categoryListElement:document.querySelector(".books-categories-list"),booksContainer:document.querySelector(".js-books-list"),showMoreBtn:document.querySelector(".books-show-more-btn"),booksShowingCount:document.querySelector(".books-showing-count")};let d=[],l="All categories",c=[],p=0,u=0;function k(){return window.innerWidth<768?_:q}async function y(e,t={}){try{const{data:o}=await O(e,t);return o}catch(o){throw B.error({title:"Error",titleColor:"#ffffff",message:`Request failed: <u>${o.message}</u>`,messageColor:"#ffffff",backgroundColor:"#ef4040",position:"topRight",timeout:4e3,animateInside:!0,progressBar:!1,close:!1,closeOnClick:!0}),o}}async function H(){return(await y(`${m}${P}`)).map(t=>t.list_name)}async function R(){return(await y(`${m}${x}`)).flatMap(t=>t.books)}async function Y(e){const t={category:e};return await y(`${m}${D}`,{params:t})}async function K(e){const t=await y(`${m}${I}${e}`);return console.log(`Book details for ID ${e}:`,t),t}function N(e){const t=`
    <li class="books-categories-item">
      <a href="#" class="books-categories-list-link ${l==="All categories"?"active":""}">All categories</a>
    </li>
  `,o=e.filter(r=>r!=="All categories").map(r=>`
        <li class="books-categories-item">
          <a href="#" class="books-categories-list-link ${r===l?"active":""}">${r}</a>
        </li>
      `).join("");return t+o}function G(e){return e.length===0?'<li class="no-books-message">No books found for this category.</li>':e.map(({book_image:t,title:o,author:r,price:n,_id:i})=>`
        <li class="books-card" data-book-id="${i}">
            <img class="books-card-img" src="${t}" alt="${o}"/>
            <div class="books-info">
                <div class="books-info-left">
                   <h4 class="books-h section-subtitle">${o}</h4>
                   <p class="books-text">${r}</p>
                   
                </div>
                <p class="books-price-text">$${n}</p>
            </div>
            <button class="learn-more-btn" type="button" data-book-modal-open data-book-id="${i}">Learn more</button>
        </li>
    `).join("")}function E(){s.categoryListElement.innerHTML=N(d),s.categoryListElement.querySelectorAll(".books-categories-list-link").forEach(e=>{e.addEventListener("click",j)})}async function T(){s.booksContainer.innerHTML="",s.showMoreBtn.classList.add("show-more-hidden"),l==="All categories"?c=await R():c=await Y(l),p=0,u=0,h()}function h(e=k()){const t=p*e,o=Math.min(t+e,c.length),r=c.slice(t,o);s.booksContainer.insertAdjacentHTML("beforeend",G(r)),u=o,s.booksShowingCount.textContent=`Showing ${u} of ${c.length}`,p++,u<c.length?s.showMoreBtn.classList.remove("show-more-hidden"):s.showMoreBtn.classList.add("show-more-hidden")}function V(){const e=s.categoryMenuContainer.classList.toggle("is-open");s.categoryToggleBtn.classList.toggle("is-open"),e&&f()}async function j(e){e.preventDefault();const t=e.target.textContent;if(l===t){s.categoryMenuContainer.classList.remove("is-open"),s.categoryToggleBtn.classList.remove("is-open");return}l=t,E(),await T(),s.categoryMenuContainer.classList.remove("is-open"),s.categoryToggleBtn.classList.remove("is-open")}async function z(e){const t=e.target.closest(".learn-more-btn");if(t){const o=t.dataset.bookId;if(o)try{const r=await K(o);alert(`Book Title: ${r.title}
Author: ${r.author}
Description: ${r.description.substring(0,100)}...`)}catch(r){alert("Failed to load book details. Please try again later."),console.error("Failed to show book details:",r)}}}async function F(){s.showMoreBtn.disabled=!0;try{h(4)}catch(e){B.error({title:"Error",message:`Failed to load books: ${e.message}`,backgroundColor:"#ef4040",titleColor:"#fff",messageColor:"#fff",position:"topRight"})}finally{s.showMoreBtn.disabled=!1}}async function U(){d=await H(),d.includes("All categories")||(d=["All categories",...d]),E(),s.categoryToggleBtn.firstChild.textContent="Categories ",await T();let e=k();window.addEventListener("resize",()=>{const t=k();t!==e&&(e=t,s.booksContainer.innerHTML="",p=0,u=0,h(t))})}const g=s.categoryListElement,b=document.querySelector(".books-categories-scrollbar-thumb");function f(){const{scrollTop:e,scrollHeight:t,clientHeight:o}=g,r=o/t,n=Math.max(r*o,24),i=o-n,a=e/(t-o)*i||0;b.style.height=n+"px",b.style.top=a+"px"}g.addEventListener("scroll",f);window.addEventListener("resize",f);f();let w=!1,M=0,$=0;b.addEventListener("mousedown",e=>{w=!0,M=e.clientY,$=g.scrollTop,document.body.style.userSelect="none"});document.addEventListener("mousemove",e=>{if(!w)return;const{scrollHeight:t,clientHeight:o}=g,r=t-o,n=b.offsetHeight,i=o-n,S=(e.clientY-M)/i*r;g.scrollTop=$+S,f()});document.addEventListener("mouseup",()=>{w=!1,document.body.style.userSelect=""});s.categoryToggleBtn.addEventListener("click",V);s.booksContainer.addEventListener("click",e=>{const t=e.target.closest(".learn-more-btn");t&&(t.blur(),z(e))});s.showMoreBtn.addEventListener("click",F);window.addEventListener("click",function(e){!s.categoryToggleBtn.contains(e.target)&&!s.categoryMenuContainer.contains(e.target)&&(s.categoryMenuContainer.classList.remove("is-open"),s.categoryToggleBtn.classList.remove("is-open"))});document.addEventListener("DOMContentLoaded",U);new L(".feedbacks-swiper",{modules:[v,C,A],slidesPerView:1,spaceBetween:24,loop:!1,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0}});
//# sourceMappingURL=index.js.map
